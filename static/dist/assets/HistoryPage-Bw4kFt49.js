import{g as h,h as D,i as T,j,k as F}from"./element-plus-D_P_grNv.js";import{a as n,i as H,g as O,u as q}from"./index-BbnE7Jro.js";import{r as i,t as K,w as B,o as f,c as I,a as e,T as a,R as p,aa as $,h as A,O as C,a3 as J,V as g,u as W,Q as X}from"./@vue-DHgT3ZDP.js";import{u as Y}from"./vue-router-BCyqFZ5F.js";import{B as Z}from"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";import"./echarts-CDqdE8Ao.js";import"./zrender-hT_74Tps.js";import"./tslib-BDyQ-Jie.js";const ee={style:{width:"500px",height:"300px","border-radius":"15px"}},oe=e("div",{style:{height:"40px"}},[e("h1",{style:{height:"40px"}},"新增查询")],-1),te={style:{"margin-top":"20px"}},se={class:""},re=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"关键词：",-1),le=e("br",null,null,-1),ae={class:""},ne=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"列表页数：",-1),ie=e("br",null,null,-1),de={class:""},ce=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"评论页数：",-1),ue={style:{width:"100%","margin-left":"300px"}},pe={style:{width:"100%",margin:"0 auto"}},_e={__name:"KeywordInsert",emits:["getDrawer"],setup(E,{emit:w}){const _=w,s=i({goods_keyword:"",goods_page:2,commit_page:2});function k(){_("getDrawer",!1)}function v(){s.value.goods_keyword===""?h.confirm("请输入查询关键字").then(()=>{}).catch(()=>{}):s.value.goods_keyword.length>20?h.confirm("关键字长度不能超过20").then(()=>{}).catch(()=>{}):isNaN(s.value.goods_page)?h.confirm("输入有误，请输入数字").then(()=>{}).catch(()=>{}):isNaN(s.value.commit_page)?h.confirm("输入有误，请输入数字").then(()=>{}).catch(()=>{}):h.confirm("是否确认新增查询 ?").then(async()=>{console.log(s.value);const m=await H(s.value);console.log(m);const r=n();r.setInsertKeyword(s.value.goods_keyword),console.log(r.insertKeyword),n().verifyInsertKeyword(),_("getDrawer",!1)}).catch(()=>{})}const S=n(),x=K(()=>S.insertKeyword);return B(x,(m,r)=>{n().verifyInsertKeyword()},{immediate:!0,deep:!0}),(m,r)=>{const d=D,c=T;return f(),I("div",ee,[oe,e("div",te,[e("div",null,[e("div",se,[re,a(d,{modelValue:s.value.goods_keyword,"onUpdate:modelValue":r[0]||(r[0]=u=>s.value.goods_keyword=u),placeholder:"输入需要搜索的商品的关键字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])]),le,e("div",ae,[ne,a(d,{modelValue:s.value.goods_page,"onUpdate:modelValue":r[1]||(r[1]=u=>s.value.goods_page=u),placeholder:"输入数字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])]),ie,e("div",de,[ce,a(d,{modelValue:s.value.commit_page,"onUpdate:modelValue":r[2]||(r[2]=u=>s.value.commit_page=u),placeholder:"输入数字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])])])]),e("div",ue,[e("div",pe,[a(c,{onClick:k},{default:p(()=>[$("取消")]),_:1}),a(c,{type:"primary",onClick:v},{default:p(()=>[$("确定")]),_:1})])])])}}},me={class:"keyword-div"},we={class:"keyword-title-div"},ve=e("span",{class:"keyword-title"},"历史搜索记录",-1),ye=e("div",{class:"hr_div"},null,-1),he={class:"keyword-btm-div"},ge={class:"keywords"},fe={class:"popover_div"},ke=e("span",{class:"popover_span"},"关键词编号： ",-1),Se={class:"popover_span"},xe=e("br",null,null,-1),Ve=e("span",{class:"popover_span"},"创 建 时 间：",-1),Ke={class:"popover_span"},Ie=e("br",null,null,-1),$e=e("span",{class:"popover_span"},"商 品 数 量：",-1),be={class:"popover_span"},qe={__name:"HistoryPage",setup(E){const w=i(""),_=i(""),s=i(),k=Y(),v=async()=>{const t=await O();s.value=t.data,console.log(s.value),s.value.forEach(o=>{o[4]=new Date(o[4]).toLocaleString()})},S=K(()=>w.value?s.value.filter(t=>t[1].includes(w.value)):s.value),x=t=>{const o=q();o.setKeywordID(t[0]),o.setKeywordValue(t[1]),o.setCommitRangeIndex(-1),o.setPriceRangeIndex(-1),o.setPriceRanges(""),k.push("/chart")};let m=null;const r=t=>{t?(m=setInterval(()=>{b()},6e4),console.log("--------")):(clearInterval(m),n().verifyInsertKeyword())},d=i({}),c=i(!1),u=i(c.value),b=async()=>{const t=n();t.verifyInsertKeyword(),d.value=t.insertKeyword,c.value=t.insertShow,t.insertShow||r(!1)};A(()=>{v(),b(),r(!1),r(!0),n().verifyInsertKeyword()});const y=i(!1),N=i("rtl"),U=()=>{y.value=!1},R=t=>{y.value=t,r(!1),r(!0),v();const o=n();o.verifyInsertKeyword(),console.log("--------"+o.insertKeyword),c.value=o.insertShow},G=n(),P=K(()=>G.insertShow);return B(P,()=>{v();const t=n();c.value=t.insertShow,u.value=t.insertShow},{immediate:!0,deep:!0}),(t,o)=>{const V=T,z=D,L=F,Q=j;return f(),I(C,null,[e("div",me,[e("div",we,[ve,a(V,{class:"keyword-title-button",type:"primary",size:"large",loading:u.value,onClick:o[0]||(o[0]=l=>y.value=!0)},{default:p(()=>[$(g(c.value?d.value:"新增 / 修改"),1)]),_:1},8,["loading"]),a(z,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=l=>_.value=l),class:"keyword-title-search",size:"large",placeholder:"关键词搜索"},{append:p(()=>[a(V,{icon:W(Z),onClick:o[1]||(o[1]=l=>w.value=_.value)},null,8,["icon"])]),_:1},8,["modelValue"])]),ye,e("div",he,[(f(!0),I(C,null,J(S.value,(l,M)=>(f(),X(L,{placement:"top-start",width:350,trigger:"hover","hide-after":"0",key:M},{reference:p(()=>[a(V,{type:"primary",plain:"",size:"large",title:l[0],onClick:Ce=>x(l)},{default:p(()=>[e("p",ge,g(l[1]),1)]),_:2},1032,["title","onClick"])]),default:p(()=>[e("div",fe,[ke,e("span",Se,g(l[0]),1),xe,Ve,e("span",Ke,g(l[4]),1),Ie,$e,e("span",be,g(l[2]),1)])]),_:2},1024))),128))])]),a(Q,{modelValue:y.value,"onUpdate:modelValue":o[3]||(o[3]=l=>y.value=l),direction:N.value,width:"500","before-close":U,style:{"border-radius":"10px"},"open-delay":"10","close-delay":"10"},{default:p(()=>[a(_e,{onGetDrawer:R})]),_:1},8,["modelValue","direction"])],64)}}};export{qe as default};
