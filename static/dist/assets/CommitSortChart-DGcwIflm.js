import{I as w}from"./echarts-CDqdE8Ao.js";import{k as x}from"./chart-CVYZd4WY.js";import{u as p,b as S}from"./index-BtJj4rZf.js";import{r as m,h as f,x as B,t as d,w as c,a9 as v,o as _,Q as b,u as k}from"./@vue-DHgT3ZDP.js";import"./zrender-hT_74Tps.js";import"./tslib-BDyQ-Jie.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-router-BCyqFZ5F.js";import"./element-plus-D_P_grNv.js";import"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";const H={__name:"CommitSortChart",setup(C){const s=m([]),o=p(),u=S(),i=async()=>{const t=p();if(!(t.keywordID==null||t.keywordID=="")){s.value=[];const e=await x(t.keywordID,t.Brand1,t.Brand2,t.Brand3);s.value=[],s.value=e.data,r.yAxis.data=s.value[0],r.series[0].data=s.value[1],console.log("重新渲染CSC"),n.setOption(r)}};let r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:[]},series:[{type:"bar",data:[]}]};const l=m(null);let n=null;f(()=>{i(),l.value=document.getElementById("chartIdcsc"),n=w(l.value),n.setOption(r),n.on("click",t=>{if(t.componentType==="series"){const e=r.yAxis.data[t.dataIndex];r.series[t.seriesIndex].data[t.dataIndex];let a={drawer:!0,brand5:"",priceRanges:""};a.brand5=e,u.setDrawer2Store(a.drawer),o.setPriceRanges(a.priceRanges),o.setBrand5Store(a.brand5),o.setBrand4Store(a.priceRanges)}})}),B(()=>{n&&n.dispose()});const h=d(()=>o.Brand1);c(h,(t,e)=>{i()},{immediate:!0,deep:!0});const g=d(()=>o.Brand2);c(g,(t,e)=>{i()},{immediate:!0,deep:!0});const y=d(()=>o.Brand3);return c(y,(t,e)=>{console.log("newVal, oldVal",t,e),i()},{immediate:!0,deep:!0}),(t,e)=>{const a=v("v-chart");return _(),b(a,{id:"chartIdcsc",class:"chart",option:k(r)},null,8,["option"])}}};export{H as default};
