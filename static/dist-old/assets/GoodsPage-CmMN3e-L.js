import{d as G,h as P,a as T,c as E}from"./element-plus-D_P_grNv.js";import{c as O}from"./goods-DMr2KP4I.js";import{c as x,u as k}from"./index-B2pHGmHf.js";import{C as $}from"./CarouselImg-J0HubsGW.js";import{I as z}from"./echarts-CDqdE8Ao.js";import{l as j}from"./chart-CrURGWuw.js";import{r as w,h as C,t as h,w as f,a9 as L,o as I,Q as M,c as F,a as l,T as a,R as s,aa as n,V as u,u as D}from"./@vue-DHgT3ZDP.js";import{$ as U}from"./zrender-hT_74Tps.js";import{C as A,D as Q}from"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-router-BCyqFZ5F.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";import"./tslib-BDyQ-Jie.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={__name:"GoodsRadarChart",setup(R){const t=w(null);let p=null;const i=w([0]),v=async()=>{const d=k(),e=x();if(e.pidList.length>0){const o=await j(d.keywordID,e.pidList[e.pidNum-1]);console.log(o.data),i.value=o.data,c.series[0].data[0].value=i.value[0],p.setOption(c)}},c={radar:{indicator:[{name:"价格",max:10},{name:"销量",max:10},{name:"好评率",max:100},{name:"评分",max:100},{name:"档位",max:3}],name:{textStyle:{color:"black",backgroundColor:"rgba(0,0,0,0)"}},radius:65,center:["50%","50%"]},series:[{type:"radar",data:[{value:[],name:"Allocated Budget",areaStyle:{color:new U(.1,.6,1,[{color:"rgba(255, 145, 124, 0.9)",offset:0},{color:"rgba(255, 145, 124, 0.9)",offset:1}])}}]}],tooltip:{formatter:function(d){return"档位: "+i.value[1][3]+"<br/>价格: "+i.value[1][1]+"<br/>当前档位平均价格："+i.value[1][2]+"<br/>销量: "+i.value[1][0]+"<br/>好评率: "+d.value[2]+"<br/>评分: "+d.value[3]+"<br/>"}}};C(()=>{t.value=document.getElementById("chartIdRadar"),p=z(t.value),p.setOption(c)});const _=x(),g=h(()=>_.pidList);f(g,d=>{try{d.length>0&&v()}catch(e){console.log(e)}},{immediate:!0,deep:!0});const S=h(()=>_.pidNum);return f(S,()=>{v()},{immediate:!0,deep:!0}),(d,e)=>{const o=L("v-chart");return I(),M(o,{id:"chartIdRadar",class:"chartChartIdRadar",option:c})}}},H={class:"goodsPage"},J={class:"imgDiv"},K={class:"goodsSess"},W={class:"sessDiv"},X={class:"goodsNumButton"},Y={style:{float:"left",height:"32px"}},Z={class:"SessDivRadar"},tt={class:"goodsInfoDiv"},et={class:"daohang"},at=l("span",null,"参数",-1),ot=l("span",null,"图表",-1),st=l("span",null,"评论",-1),Dt={__name:"GoodsPage",setup(R){const t=w({pidList:[],pidListLength:1,pidNum:1,title:"",brand3:"",brand4:"",brand5:"",price:"",shop:"",commit:"",detail_url:"",pimg:[],sentimentScore:"",commit_count:"",count5:"",commitScore:""}),p=k(),i=x(),v=()=>{t.value.pidList=i.pidList,t.value.pidNum=1,i.setPidNum(1),t.value.pidListLength=t.value.pidList.length},c=()=>{window.open(t.value.detail_url)},_=async()=>{const e=await O(p.keywordID,t.value.pidList[t.value.pidNum-1]);console.log(e.data),t.value.title=e.data[0],t.value.brand3=e.data[1],t.value.brand4=e.data[2],t.value.brand5=e.data[3],t.value.price=e.data[4],t.value.shop=e.data[5],t.value.commit=e.data[6],t.value.detail_url=e.data[7],t.value.pimg=e.data[8],t.value.sentimentScore=(e.data[9]*100).toFixed(2),t.value.commit_count=e.data[10],t.value.count5=e.data[11];for(let o=0;o<t.value.pimg.length;o++)t.value.pimg[o].indexOf("s616x405jfs")!==-1&&(t.value.pimg[o]=t.value.pimg[o].replace("s616x405jfs","s616x405_jfs"));t.value.commit_count==0?t.value.commitScore=0:t.value.commitScore=(t.value.count5/t.value.commit_count*100).toFixed(2)},g=e=>{t.value.pidNum+=e,t.value.pidNum<=0&&(t.value.pidNum=1),t.value.pidNum>=t.value.pidListLength&&(t.value.pidNum=t.value.pidListLength),i.setPidNum(t.value.pidNum)};C(()=>{t.value={pidList:[],pidNum:1,pidListLength:1,title:"",brand3:"",brand4:"",brand5:"",price:"",shop:"",commit:"",detail_url:"",pimg:[],sentimentScore:"",commit_count:"",count5:"",commitScore:""},v()});const S=h(()=>i.pidList);f(S,()=>{v()},{immediate:!0,deep:!0});const d=h(()=>i.pidNum);return f(d,()=>{t.value.pidList.length>0&&_()},{immediate:!0,deep:!0}),(e,o)=>{const r=L("spwn"),N=G,y=P,b=E,V=T,B=L("RouterView");return I(),F("div",H,[l("div",J,[a($,{pimg:t.value.pimg,style:{width:"230px",height:"230px"}},null,8,["pimg"])]),l("div",K,[a(r,{class:"goodsSessTieleSpan"},{default:s(()=>[n("      "+u(t.value.title),1)]),_:1}),l("div",W,[a(r,{class:"sessDivSpan",title:t.value.brand3},{default:s(()=>[n(" 商品分类："+u(t.value.brand3),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.brand4},{default:s(()=>[n(" 商品品牌："+u(t.value.brand4),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.brand5},{default:s(()=>[n(" 商品型号："+u(t.value.brand5),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.shop},{default:s(()=>[n(" 商品店铺："+u(t.value.shop),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.price},{default:s(()=>[n(" 商品价格："+u(t.value.price),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.commit},{default:s(()=>[n(" 商品销量："+u(t.value.commit),1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.commitScore},{default:s(()=>[n(" 商品好评率："+u(t.value.commitScore)+"% ",1)]),_:1},8,["title"]),a(r,{class:"sessDivSpan",title:t.value.sentimentScore},{default:s(()=>[n(" 商品得分："+u(t.value.sentimentScore),1)]),_:1},8,["title"]),l("div",X,[l("button",{class:"goodsButtonIn",style:{float:"left","margin-right":"5px",height:"32px",width:"45px"},onClick:o[0]||(o[0]=m=>g(-1))},[a(N,null,{default:s(()=>[a(D(A))]),_:1})]),l("div",Y,[a(y,{modelValue:t.value.pidNum,"onUpdate:modelValue":o[1]||(o[1]=m=>t.value.pidNum=m),style:{width:"40px"}},null,8,["modelValue"]),n("  /  "),a(y,{modelValue:t.value.pidListLength,"onUpdate:modelValue":o[2]||(o[2]=m=>t.value.pidListLength=m),style:{width:"40px"},disabled:""},null,8,["modelValue"])]),l("button",{class:"goodsButtonIn",style:{float:"left","margin-left":"5px",height:"32px",width:"45px"},onClick:o[3]||(o[3]=m=>g(1))},[a(N,null,{default:s(()=>[a(D(Q))]),_:1})])]),l("button",{class:"goodsIn",onClick:o[4]||(o[4]=m=>c())},"购买")]),l("div",Z,[a(q)])]),l("div",tt,[l("div",et,[a(V,{"active-text-color":"black","background-color":"rgba(20, 20, 20, 0)","text-color":"rgba(20, 20, 20, 0.4)",onOpen:e.handleOpen,onClose:e.handleClose,router:!0,"default-active":"/goods/spec",class:"el-menu-goods-page",mode:"horizontal"},{default:s(()=>[a(b,{index:"/goods/spec",router:"",style:{width:"60px","font-size":"16px"}},{default:s(()=>[at]),_:1}),a(b,{index:"/goods/chart",router:"",style:{width:"60px","font-size":"16px"}},{default:s(()=>[ot]),_:1}),a(b,{index:"/goods/commit",router:"",style:{width:"60px","font-size":"16px"}},{default:s(()=>[st]),_:1})]),_:1},8,["onOpen","onClose"])]),l("div",null,[a(B)])])])}}};export{Dt as default};
