import{d as B}from"./element-plus-D_P_grNv.js";import{u as T,l as E,x as G,y as K,A as V}from"./@element-plus-CbUCwym_.js";import{u as x,b as H,a as R}from"./index-B2pHGmHf.js";import{u as k}from"./vue-router-BCyqFZ5F.js";import{I as A}from"./echarts-CDqdE8Ao.js";import{g as M,a as z,b as N}from"./chart-CrURGWuw.js";import{r as d,h as w,x as U,a9 as D,o as b,c as I,a as e,T as r,u as _,t as S,w as O,R as y,V as C}from"./@vue-DHgT3ZDP.js";import{$ as W}from"./zrender-hT_74Tps.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";import"./tslib-BDyQ-Jie.js";const Y={class:"AllChartLeft"},Z={class:"AllChartLeft1"},j={class:"AllChartLeft2"},q={__name:"AllChartLeft",setup(L){const m=d(null),a=d(null);let n=null,i=null;const c=async()=>{m.value=document.getElementById("AllChartLeftChartId1"),n=A(m.value),n.setOption(h),a.value=document.getElementById("AllChartLeftChartId2"),i=A(a.value),i.setOption(o);const l=await M();h.series[0].data=l.data[0],o.series[0].data=l.data[1],n.setOption(h),i.setOption(o)};let h={title:{text:"系统中所有商品的分类总计",left:"left",top:5,left:10,textStyle:{color:"rgba(0, 0, 0, 0.8)"}},tooltip:{trigger:"item"},series:[{type:"pie",radius:[50,250],center:["50%","50%"],roseType:"area",type:"pie",radius:"65%",center:["50%","50%"],data:[{value:335,name:"Direct"},{value:310,name:"Email"},{value:274,name:"Union Ads"},{value:235,name:"Video Ads"},{value:400,name:"Search Engine"}].sort(function(l,u){return l.value-u.value}),roseType:"radius",label:{color:"rgba(0, 0, 0, 0.8)"},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(l){return Math.random()*800}}]},o={title:{text:"系统中所有商品的品牌总计",left:"left",top:5,left:10,textStyle:{color:"rgba(0, 0, 0, 0.8)"}},tooltip:{trigger:"item"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},label:{color:"rgba(0, 0, 0, 0.8)"},data:[]}]};return w(()=>{c()}),U(()=>{n&&n.dispose()}),(l,u)=>{const t=D("v-chart");return b(),I("div",Y,[e("div",Z,[r(t,{id:"AllChartLeftChartId1",class:"AllChartLeftChart",option:_(h)},null,8,["option"])]),e("div",j,[r(t,{id:"AllChartLeftChartId2",class:"AllChartLeftChart",option:_(o)},null,8,["option"])])])}}},F={class:"AllChartCenter"},J={__name:"AllChartCenter",setup(L){k();const m=d(null);let a=null;const n=d([]),i=d([]),c=d([]),h=d([]),o=d([]),l=d([]),u=d([]),t=d([]),s=d(10),f=async()=>{const v=await z();n.value=v.data[0],i.value=v.data[1],c.value=v.data[2],h.value=v.data[3],o.value=n.value.slice(0,s.value),l.value=i.value.slice(0,s.value),u.value=c.value.slice(0,s.value),t.value=h.value.slice(0,s.value),p.xAxis[0].data=l.value,p.xAxis[1].data=o.value,p.series[0].data=u.value,p.series[1].data=t.value,a.setOption(p)},$=()=>{setInterval(()=>{u.value.shift(),u.value.push(c.value[s.value%c.value.length]),t.value.shift(),t.value.push(h.value[s.value%c.value.length]),o.value.shift(),o.value.push(n.value[s.value%n.value.length]),l.value.shift(),l.value.push(i.value[s.value%n.value.length]),s.value++,a.setOption(p)},2100)};w(()=>{m.value=document.getElementById("AllChartCenterChartId"),a=A(m.value),a.setOption(p),f().then(()=>{$()}),a.on("click",function(v){const g=x();g.setKeywordID(v.name),g.setKeywordValue(p.xAxis[0].data[v.dataIndex]),g.setCommitRangeIndex(-1),g.setPriceRangeIndex(-1),g.setPriceRanges("")})});const p={title:{text:"关键词信息",left:"left",top:5,left:10,textStyle:{color:"rgba(0, 0, 0, 0.8)"}},grid:{top:80,bottom:50},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{},dataZoom:{show:!1,start:0,end:100},xAxis:[{type:"category",boundaryGap:!0,axisLabel:{interval:0},data:[]},{type:"category",boundaryGap:!0,axisLabel:{interval:0},data:[]}],yAxis:[{type:"value",scale:!0,name:"平均价格",min:0,boundaryGap:[.2,.2]},{type:"value",scale:!0,name:"商品数量",min:0,boundaryGap:[.2,.2]}],series:[{name:"商品数量",type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],label:{bottom:0}},{name:"商品平均价格",type:"line",data:[],label:{bottom:0}}]};return(v,g)=>{const P=D("v-chart");return b(),I("div",F,[r(P,{id:"AllChartCenterChartId",class:"AllChartCenterChart",option:p})])}}},Q={class:"AllChartRight"},X={__name:"AllChartRight",setup(L){const m=k(),a=d(null);let n=null;const i=[0,50,100,200,500,1e3,2e3,5e3,1e4,2e4,1e6,999999999999],c=[0,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5,2e5,5e5,999999999999],h=async()=>{const t=x();if(!(t.keywordID==null||t.keywordID=="")){const s=await N(t.keywordID,"","","");o.series[0].data=s.data,o.title.subtext=t.keywordValue,n.setOption(o)}},o={title:{text:"选中关键词符合价格销量区间的商品数量",subtext:"",subtextStyle:{fontSize:17},left:"5%",top:"1%"},legend:{right:"10%",top:"3%"},grid:{left:"15%",top:"10%"},xAxis:{type:"value",name:"销量",nameLocation:"middle",nameGap:25,axisLine:{show:!0},axisTick:{show:!0},axisLabel:{formatter:function(t){return c[t]}}},yAxis:{type:"category",name:"价格",nameLocation:"middle",nameGap:35,axisLabel:{formatter:function(t){return i[t]}}},tooltip:{formatter:function(t){const s=t.value;return"销量："+i[s[1]]+"-"+i[s[1]-1]+"<br/>价格："+c[s[0]]+"-"+c[s[0]-1]+"<br/>数量："+s[2]}},series:[{data:[],type:"scatter",symbolSize:function(t){return Math.cbrt(t[2])*8},emphasis:{focus:"series",label:{show:!0,formatter:function(t){return t.data[2]},position:"top"}},itemStyle:{shadowBlur:10,shadowColor:"rgba(25, 100, 150, 0.5)",shadowOffsetY:5,color:new W(.4,.3,1,[{offset:0,color:"rgb(129, 227, 238)"},{offset:1,color:"rgb(25, 183, 207)"}])}}]};w(()=>{a.value=document.getElementById("AllChartRightChartId"),n=A(a.value),n.setOption(o),n.on("click",function(t){console.log(t);const s=x(),f=H();t.data[2]>0&&(s.setCommitRangeIndex(t.data[0]),s.setPriceRangeIndex(t.data[1]),m.push("/chart/s3c"),f.setDrawer3Store(!0))})});const l=x(),u=S(()=>l.keywordID);return O(u,(t,s)=>{h()},{immediate:!0,deep:!0}),(t,s)=>{const f=D("v-chart");return b(),I("div",Q,[r(f,{id:"AllChartRightChartId",class:"AllChartRightChart",option:o})])}}},tt={class:"HomeMain"},et={class:"AllData"},at={class:"AllDataLeft"},ot={class:"AllDataLeft1"},lt={class:"textRight"},st=e("p",{style:{"font-weight":"600"}},"关键词采集数量",-1),nt={class:"AllDataLeft2"},rt={class:"textRight"},it=e("p",{style:{"font-weight":"600"}},"正在采集的关键词",-1),ct={class:"AllDataRight"},ut={class:"AllDataRight1"},dt={class:"textRight"},ht=e("p",{style:{"font-weight":"600"}},"已采集商品数据量",-1),mt={class:"AllDataRight2"},pt={class:"textRight"},vt=e("p",{style:{"font-weight":"600"}},"已采集评论量",-1),_t={class:"AllDataRight3"},gt={class:"textRight"},ft=e("p",{style:{"font-weight":"600"}},"已采集评论图片量",-1),yt={class:"AllChart"},Kt={__name:"HomePage",setup(L){const m=k(),a=d({keywordCount:0,keywordLoaading:"",goodsCount:0,commitCount:0,commitImg:0}),n=async()=>{const o=R();o.insertKeyword==""?a.value.keywordLoaading="无":a.value.keywordLoaading=o.insertKeyword,a.value.keywordCount=o.allData.keywordCount,a.value.goodsCount=o.allData.goodsCount,a.value.commitCount=o.allData.commitCount,a.value.commitImg=o.allData.commitImg},i=()=>{m.push("/history")},c=R();w(()=>{c.verifyInsertKeyword(),n()});const h=S(()=>c.insertKeyword);return O(h,()=>{c.verifyInsertKeyword(),n()},{immediate:!0,deep:!0}),(o,l)=>{const u=B;return b(),I("div",tt,[e("div",et,[e("div",at,[e("div",ot,[r(u,{onClick:l[0]||(l[0]=t=>i())},{default:y(()=>[r(_(T))]),_:1}),e("div",lt,[st,e("span",{onClick:l[1]||(l[1]=t=>i())},C(a.value.keywordCount),1)])]),e("div",nt,[r(u,{onClick:l[2]||(l[2]=t=>i())},{default:y(()=>[r(_(E))]),_:1}),e("div",rt,[it,e("span",{onClick:l[3]||(l[3]=t=>i())},C(a.value.keywordLoaading),1)])])]),e("div",ct,[e("div",ut,[r(u,null,{default:y(()=>[r(_(G))]),_:1}),e("div",dt,[ht,e("span",null,C(a.value.goodsCount),1)])]),e("div",mt,[r(u,null,{default:y(()=>[r(_(K))]),_:1}),e("div",pt,[vt,e("span",null,C(a.value.commitCount),1)])]),e("div",_t,[r(u,null,{default:y(()=>[r(_(V))]),_:1}),e("div",gt,[ft,e("span",null,C(a.value.commitImg),1)])])])]),e("div",yt,[r(q),r(J),r(X)])])}}};export{Kt as default};
