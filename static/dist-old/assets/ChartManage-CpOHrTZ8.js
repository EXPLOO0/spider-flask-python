import{l as K,m as Q,a as Y,n as q,c as H}from"./element-plus-D_P_grNv.js";import{I as E}from"./echarts-CDqdE8Ao.js";import{c as J,d as X,e as Z,f as ee,h as te,i as ae}from"./chart-CrURGWuw.js";import{u as g,b as z,c as P}from"./index-B2pHGmHf.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as u,t as y,w as v,h as $,x as G,a9 as U,o as f,Q as R,u as O,c as D,a as n,T as m,R as b,O as C,a3 as A,V as T}from"./@vue-DHgT3ZDP.js";import{g as oe,a as se,b as re}from"./goods-DMr2KP4I.js";import{u as N,R as ne}from"./vue-router-BCyqFZ5F.js";import{C as le}from"./CarouselImg-J0HubsGW.js";import"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./zrender-hT_74Tps.js";import"./tslib-BDyQ-Jie.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";const de={__name:"PriceRangesModelChart",setup(I){const t=g(),i=u([]),a=u(null);let c=null;const h=u(0),s=async()=>{const l=g();if(i.value=[],console.log(11111),!(l.keywordID==null||l.keywordID=="")){i.value=[];const e=await J(l.keywordID,l.Brand4,l.priceRanges);i.value=[],console.log(e.data);for(const o in e.data)i.value.push({value:e.data[o],name:o});console.log("重新渲染PRMC"+h.value),h.value++,r.series[0].data=i.value,c.setOption(r)}};let r={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"型号销量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:i.value}]};const x=y(()=>t.Brand4),S=y(()=>t.priceRanges);return v(x,l=>{try{l.length>0&&s()}catch(e){console.log(e)}},{immediate:!0,deep:!0}),v(S,l=>{try{l.length>0&&s()}catch(e){console.log(e)}},{immediate:!0,deep:!0}),$(()=>{i.value=[],a.value=document.getElementById("chartId3"),c=E(a.value),c.setOption(r),c.on("click",l=>{if(l.componentType==="series"){const e=r.series[l.seriesIndex].data[l.dataIndex];g().setBrand5Store(e.name)}})}),G(()=>{c&&c.dispose()}),(l,e)=>{const o=U("v-chart");return f(),R(o,{id:"chartId3",class:"chartChartId3",option:O(r)},null,8,["option"])}}},ie=W(de,[["__scopeId","data-v-0b69e7e2"]]),ce={class:"selectdiv",style:{"margin-left":"40px"}},ue=n("span",null,"分类一：",-1),pe={class:"selectdiv"},me=n("span",null,"分类二：",-1),he={class:"selectdiv"},ve=n("span",null,"分类三：",-1),ge={__name:"SelectBrand",setup(I){const t=u(""),i=u(""),a=u(""),c=u([]),h=u([]),s=u([]),r=async()=>{const o=g(),d=await X(o.keywordID);c.value=d.data},x=async()=>{const o=g(),d=await Z(o.keywordID,t.value);h.value=d.data},S=async()=>{const o=g(),d=await ee(o.keywordID,t.value,i.value);s.value=d.data},l=()=>{const o=g();o.setBrand1Store(t.value),o.setBrand2Store(i.value),o.setBrand3Store(a.value),(t.value||i.value||a.value)&&(o.setCommitRangeIndex(-1),o.setPriceRangeIndex(-1))};$(()=>{r()}),v(t,()=>{x(),i.value="",a.value="",h.value=[],s.value=[],l()}),v(i,()=>{S(),a.value="",s.value=[],l()}),v(a,()=>{l()});const e=y(()=>g().Brand3);return v(e,(o,d)=>{l()},{immediate:!0,deep:!0}),(o,d)=>{const B=K,V=Q;return f(),D(C,null,[n("div",ce,[ue,m(V,{modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=p=>t.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(f(!0),D(C,null,A(c.value,p=>(f(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",pe,[me,m(V,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=p=>i.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(f(!0),D(C,null,A(h.value,p=>(f(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",he,[ve,m(V,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=p=>a.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(f(!0),D(C,null,A(s.value,p=>(f(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])],64)}}},_e={__name:"BrandShopProportionChart",props:{num:{type:String,default:"0"}},setup(I){const t=g(),i=N(),a=u([[1],[2]]);let c=null;const h=z(),s=I,r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{top:"2%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:a.value[0]},series:[{type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:a.value[1]}]},x=async()=>{const e=await te(t.keywordID,t.Brand5);a.value[0]=e.data[0],a.value[1]=e.data[1],r.yAxis.data=a.value[0],r.series[0].data=a.value[1],c.setOption(r)},S=async e=>{const o=await oe(t.keywordID,t.Brand5,e);P().setPidList(o.data),i.push("/goods")};$(()=>{a.value[0]=[],a.value[1]=[],a.value=document.getElementById("chartId4"+s.num),c=E(a.value),c.setOption(r),c.on("click",o=>{if(o.componentType==="series"){const d=r.yAxis.data[o.dataIndex];console.log("Y轴数据:",d),S(d),h.setDrawerStore(!1),h.setDrawer2Store(!1),h.setDrawer3Store(!1)}});const e=y(()=>h.drawer);v(e,(o,d)=>{r.yAxis.data=[],r.series[0].data=[],c.setOption(r)},{immediate:!0,deep:!0})});const l=y(()=>t.Brand5);return v(l,(e,o)=>{e!=""&&x()},{immediate:!0,deep:!0}),(e,o)=>{const d=U("v-chart");return f(),R(d,{id:"chartId4"+s.num,class:"chart",option:r},null,8,["id"])}}},fe={class:"main"},we={class:"header"},ye={class:"imgDiv"},xe={class:"title"},Se={class:"model"},be=n("span",{class:"titleSpan"},"商品型号:",-1),Be={class:"titleSpanBrand"},Ie={class:"name"},De=n("span",{class:"titleSpan"},"商品名称:",-1),ke={class:"titleSpanTitle"},Ve={class:"price"},Te=n("span",{class:"titleSpan"},"商品价格:",-1),Ce={class:"titleSpanNum"},Pe={class:"commit"},Re=n("span",{class:"titleSpan"},"商品销量:",-1),$e={class:"titleSpanNum"},Me=n("div",{class:"hr_div"},null,-1),Le={class:"chartdiv"},j={__name:"GoodShow",props:{drawer:{type:Boolean,default:!1},num:{type:String,default:"0"}},setup(I){const t=u({brand:"",title:"",priceMax:"",priceMin:"",priceAvg:"",commit:"",goodCommit:"",commitScore:"",pimg:[]}),i=I;v(()=>i.drawer,s=>{s||(t.value={brand:"",title:"",priceMax:"",priceMin:"",priceAvg:"",commit:"",goodCommit:"",commitScore:"",pimg:[]},g().setBrand5Store(""))});const a=g(),c=async()=>{console.log("1111111111111"),console.log(a.keywordID,a.Brand1,a.Brand2,a.Brand3,a.Brand4,a.Brand5);const s=await se(a.keywordID,a.Brand1,a.Brand2,a.Brand3,a.Brand4,a.Brand5);t.value.brand=s.data[0],t.value.title=s.data[1],t.value.priceMax=s.data[2][0],t.value.priceMin=s.data[2][1],t.value.commit=s.data[3],t.value.pimg=s.data[4],t.value.goodCommit=s.data[5];for(let r=0;r<t.value.pimg.length;r++)t.value.pimg[r].indexOf("s616x405jfs")!==-1&&(t.value.pimg[r]=t.value.pimg[r].replace("s616x405jfs","s616x405_jfs"))},h=y(()=>a.Brand5);return v(h,s=>{s!=""&&c()},{immediate:!0,deep:!0}),(s,r)=>(f(),D("div",fe,[n("div",we,[n("div",ye,[m(le,{pimg:t.value.pimg},null,8,["pimg"])]),n("div",xe,[n("div",Se,[be,n("span",Be,T(t.value.brand),1)]),n("div",Ie,[De,n("span",ke,T(t.value.title),1)]),n("div",Ve,[Te,n("span",Ce,"￥"+T(t.value.priceMin)+"-￥"+T(t.value.priceMax),1)]),n("div",Pe,[Re,n("span",$e,T(t.value.commit),1)])])]),Me,n("div",Le,[m(_e,{style:{width:"720px",height:"520px"},num:i.num},null,8,["num"])])]))}},Ae={style:{width:"1800px",height:"600px",margin:"0px",padding:"0px"}},Oe={__name:"TopToBottomDrawer",setup(I){const t=N(),i=u([]),a=u(null);let c=null;const h=async()=>{const e=g(),o=await ae(e.keywordID,e.Brand1,e.Brand2,e.Brand3,e.commitRangeIndex,e.priceRangeIndex);i.value=o.data,s.xAxis[0].data=i.value[0],s.series[0].data=i.value[1],s.series[1].data=i.value[2],s.series[2].data=i.value[3],c.setOption(s)},s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0},axisLabel:{rotate:45,fontStyle:"italic",truncate:!0,formatter:function(e){return e.length>20?e.substring(0,20)+"...":e}}}],yAxis:[{name:"销量",type:"value",position:"left"},{name:"价格",type:"value",position:"right"},{name:"评分",type:"value",max:1,offset:35,position:"right"}],series:[{name:"销量",type:"bar",data:[]},{name:"价格",type:"bar",data:[],yAxisIndex:1},{name:"评分",type:"line",data:[],yAxisIndex:2}]},r=async()=>{const e=g();console.log(e.brand5);const o=await re(e.keywordID,e.Brand1,e.Brand2,e.Brand3,e.commitRangeIndex,e.priceRangeIndex,e.Brand5);console.log("pidList",o.data.pidList),P().setPidList(o.data),t.push("/goods")};$(()=>{a.value=document.getElementById("chartIdTTB"),c=E(a.value),c.setOption(s),c.on("click",e=>{if(e.componentType==="series"){console.log(e),g().setBrand5Store(e.name),r();const d=z();d.setDrawerStore(!1),d.setDrawer2Store(!1),d.setDrawer3Store(!1)}})});const x=g(),S=y(()=>x.commitRangeIndex),l=y(()=>x.priceRangeIndex);return v(S,e=>{h()},{immediate:!0,deep:!0}),v(l,e=>{h()},{immediate:!0,deep:!0}),(e,o)=>{const d=U("v-chart");return f(),D("div",Ae,[m(d,{id:"chartIdTTB",class:"chartTTB",option:s})])}}},Ee=W(Oe,[["__scopeId","data-v-d02357cc"]]),ze={class:"selectDiv"},Ue=n("span",null,"品牌",-1),Ne=n("span",null,"销量",-1),je=n("span",null,"价格",-1),We={style:{width:"1500px",height:"700px"}},Ge={class:"drawerDiv",style:{"margin-left":"10px"}},Fe={class:"drawerDiv",style:{"border-radius":"15px"}},Ke={class:"drawerDiv",style:{"border-radius":"15px"}},ht={__name:"ChartManage",setup(I){const t=u(!1),i=u("rtl"),a=()=>{l.setDrawerStore(!1)},c=u(!1),h=u("ltr"),s=()=>{l.setDrawer2Store(!1)},r=u(!1),x=u("ttb"),S=()=>{l.setDrawer3Store(!1)};v(()=>t,_=>{_||P().setPidList([])}),v(()=>c,_=>{_||P().setPidList([])}),v(()=>r,_=>{_||P().setPidList([])});const l=z(),e=y(()=>l.drawer);v(e,_=>{t.value=_},{immediate:!0,deep:!0});const o=y(()=>l.drawer2);v(o,_=>{c.value=_},{immediate:!0,deep:!0});const d=y(()=>l.drawer3);v(d,_=>{r.value=_},{immediate:!0,deep:!0});const B=N(),V=u("/chart/bprc"),p=()=>{V.value=B.currentRoute.value.path,console.log(B.currentRoute.value.path)};return G(()=>{B.afterEach(p)}),(_,w)=>{const M=H,F=Y,L=q;return f(),D(C,null,[n("div",null,[n("div",ze,[m(ge),m(F,{"active-text-color":"black","background-color":"rgba(20, 20, 20, 0)","text-color":"rgba(20, 20, 20, 0.4)",onOpen:_.handleOpen,onClose:w[0]||(w[0]=k=>S),router:!0,"default-active":O(B).currentRoute.path,class:"el-menu-chart-page",mode:"horizontal"},{default:b(()=>[m(M,{class:"chart-page-menu",index:"/chart/bprc",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[Ue]),_:1}),m(M,{class:"chart-page-menu",index:"/chart/csc",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[Ne]),_:1}),m(M,{class:"chart-page-menu",index:"/chart/s3c",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[je]),_:1})]),_:1},8,["onOpen","default-active"])]),n("div",We,[m(O(ne))])]),m(L,{modelValue:t.value,"onUpdate:modelValue":w[1]||(w[1]=k=>t.value=k),direction:i.value,size:"1520","before-close":a,"with-header":!1},{default:b(()=>[n("div",Ge,[m(ie,{style:{width:"700px",height:"800px"}})]),n("div",Fe,[m(j,{style:{"border-radius":"15px"},drawer:t.value,num:1},null,8,["drawer"])])]),_:1},8,["modelValue","direction"]),m(L,{modelValue:c.value,"onUpdate:modelValue":w[2]||(w[2]=k=>c.value=k),direction:h.value,size:"780","before-close":s,"with-header":!1,style:{"border-radius":"0 5px 5px 0"}},{default:b(()=>[n("div",Ke,[m(j,{style:{"border-radius":"15px"},drawer:c.value,num:2},null,8,["drawer"])])]),_:1},8,["modelValue","direction"]),m(L,{modelValue:r.value,"onUpdate:modelValue":w[3]||(w[3]=k=>r.value=k),direction:x.value,size:"650","before-close":S,"with-header":!1,style:{"border-radius":"0 0 5px 5px",padding:"0",margin:"0"}},{default:b(()=>[m(Ee,{style:{"border-radius":"15px",margin:"0",padding:"0"},drawer:r.value},null,8,["drawer"])]),_:1},8,["modelValue","direction"])],64)}}};export{ht as default};
