import{g as M,h as C,i as D,j,k as q}from"./element-plus-D_P_grNv.js";import{a as n,i as F,g as H,u as O}from"./index-B2pHGmHf.js";import{r as i,t as V,w as T,o as h,c as K,a as e,T as a,R as p,aa as I,h as A,O as b,a3 as J,V as g,u as W,Q as X}from"./@vue-DHgT3ZDP.js";import{u as Y}from"./vue-router-BCyqFZ5F.js";import{B as Z}from"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";import"./echarts-CDqdE8Ao.js";import"./zrender-hT_74Tps.js";import"./tslib-BDyQ-Jie.js";const ee={style:{width:"500px",height:"300px","border-radius":"15px"}},oe=e("div",{style:{height:"40px"}},[e("h1",{style:{height:"40px"}},"新增查询")],-1),te={style:{"margin-top":"20px"}},se={class:""},re=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"关键词：",-1),le=e("br",null,null,-1),ae={class:""},ne=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"列表页数：",-1),ie=e("br",null,null,-1),de={class:""},ce=e("p",{style:{float:"left",margin:"auto",width:"100px","text-align":"right"}},"评论页数：",-1),ue={style:{width:"100%","margin-left":"300px"}},pe={style:{width:"100%",margin:"0 auto"}},_e={__name:"KeywordInsert",emits:["getDrawer"],setup(B,{emit:w}){const _=w,r=i({goods_keyword:"",goods_page:2,commit_page:2,qa_page:0});function f(){_("getDrawer",!1)}function y(){M.confirm("是否确认新增查询 ?").then(async()=>{console.log(r.value);const m=await F(r.value);console.log(m);const s=n();s.setInsertKeyword(r.value.goods_keyword),console.log(s.insertKeyword),n().verifyInsertKeyword(),_("getDrawer",!1)}).catch(()=>{})}const k=n(),S=V(()=>k.insertKeyword);return T(S,(m,s)=>{n().verifyInsertKeyword()},{immediate:!0,deep:!0}),(m,s)=>{const d=C,c=D;return h(),K("div",ee,[oe,e("div",te,[e("div",null,[e("div",se,[re,a(d,{modelValue:r.value.goods_keyword,"onUpdate:modelValue":s[0]||(s[0]=u=>r.value.goods_keyword=u),placeholder:"输入需要搜索的商品的关键字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])]),le,e("div",ae,[ne,a(d,{modelValue:r.value.goods_page,"onUpdate:modelValue":s[1]||(s[1]=u=>r.value.goods_page=u),placeholder:"输入数字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])]),ie,e("div",de,[ce,a(d,{modelValue:r.value.commit_page,"onUpdate:modelValue":s[2]||(s[2]=u=>r.value.commit_page=u),placeholder:"输入数字",style:{width:"330px",margin:"0 auto"}},null,8,["modelValue"])])])]),e("div",ue,[e("div",pe,[a(c,{onClick:f},{default:p(()=>[I("取消")]),_:1}),a(c,{type:"primary",onClick:y},{default:p(()=>[I("确定")]),_:1})])])])}}},me={class:"keyword-div"},we={class:"keyword-title-div"},ye=e("span",{class:"keyword-title"},"历史搜索记录",-1),ve=e("div",{class:"hr_div"},null,-1),ge={class:"keyword-btm-div"},he={class:"keywords"},fe={class:"popover_div"},ke=e("span",{class:"popover_span"},"关键词编号： ",-1),Se={class:"popover_span"},xe=e("br",null,null,-1),Ve=e("span",{class:"popover_span"},"创 建 时 间：",-1),Ke={class:"popover_span"},Ie=e("br",null,null,-1),$e=e("span",{class:"popover_span"},"商 品 数 量：",-1),be={class:"popover_span"},Oe={__name:"HistoryPage",setup(B){const w=i(""),_=i(""),r=i(),f=Y(),y=async()=>{const t=await H();r.value=t.data,console.log(r.value),r.value.forEach(o=>{o[4]=new Date(o[4]).toLocaleString()})},k=V(()=>w.value?r.value.filter(t=>t[1].includes(w.value)):r.value),S=t=>{const o=O();o.setKeywordID(t[0]),o.setKeywordValue(t[1]),o.setCommitRangeIndex(-1),o.setPriceRangeIndex(-1),o.setPriceRanges(""),f.push("/chart")};let m=null;const s=t=>{t?(m=setInterval(()=>{$()},6e4),console.log("--------")):(clearInterval(m),n().verifyInsertKeyword())},d=i({}),c=i(!1),u=i(c.value),$=async()=>{const t=n();t.verifyInsertKeyword(),d.value=t.insertKeyword,c.value=t.insertShow,t.insertShow||s(!1)};A(()=>{y(),$(),s(!1),s(!0),n().verifyInsertKeyword()});const v=i(!1),E=i("rtl"),U=()=>{v.value=!1},R=t=>{v.value=t,s(!1),s(!0),y();const o=n();o.verifyInsertKeyword(),console.log("--------"+o.insertKeyword),c.value=o.insertShow},G=n(),P=V(()=>G.insertShow);return T(P,()=>{y();const t=n();c.value=t.insertShow,u.value=t.insertShow},{immediate:!0,deep:!0}),(t,o)=>{const x=D,z=C,L=q,N=j;return h(),K(b,null,[e("div",me,[e("div",we,[ye,a(x,{class:"keyword-title-button",type:"primary",size:"large",loading:u.value,onClick:o[0]||(o[0]=l=>v.value=!0)},{default:p(()=>[I(g(c.value?d.value:"新增 / 修改"),1)]),_:1},8,["loading"]),a(z,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=l=>_.value=l),class:"keyword-title-search",size:"large",placeholder:"关键词搜索"},{append:p(()=>[a(x,{icon:W(Z),onClick:o[1]||(o[1]=l=>w.value=_.value)},null,8,["icon"])]),_:1},8,["modelValue"])]),ve,e("div",ge,[(h(!0),K(b,null,J(k.value,(l,Q)=>(h(),X(L,{placement:"top-start",width:350,trigger:"hover","hide-after":"0",key:Q},{reference:p(()=>[a(x,{type:"primary",plain:"",size:"large",title:l[0],onClick:Ce=>S(l)},{default:p(()=>[e("p",he,g(l[1]),1)]),_:2},1032,["title","onClick"])]),default:p(()=>[e("div",fe,[ke,e("span",Se,g(l[0]),1),xe,Ve,e("span",Ke,g(l[4]),1),Ie,$e,e("span",be,g(l[2]),1)])]),_:2},1024))),128))])]),a(N,{modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=l=>v.value=l),direction:E.value,width:"500","before-close":U,style:{"border-radius":"10px"},"open-delay":"10","close-delay":"10"},{default:p(()=>[a(_e,{onGetDrawer:R})]),_:1},8,["modelValue","direction"])],64)}}};export{Oe as default};
