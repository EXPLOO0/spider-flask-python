import{l as Q,m as Y,a as j,n as q,c as H}from"./element-plus-D_P_grNv.js";import{I as E}from"./echarts-CDqdE8Ao.js";import{c as J,d as X,e as Z,f as ee,h as te,i as ae}from"./chart-CVYZd4WY.js";import{u as _,b as z,c as P}from"./index-BtJj4rZf.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as u,t as y,w as v,h as $,x as F,a9 as U,o as w,Q as R,u as O,c as D,a as r,T as m,R as b,O as C,a3 as A,V as T}from"./@vue-DHgT3ZDP.js";import{g as oe,a as se,b as re}from"./goods-CDsjWicG.js";import{u as N,R as ne}from"./vue-router-BCyqFZ5F.js";import{C as le}from"./CarouselImg-J0HubsGW.js";import"./@element-plus-CbUCwym_.js";import"./@vueuse-Cg-j_3TO.js";import"./lodash-es-Dd23coqs.js";import"./@ctrl-riLredlm.js";import"./@popperjs-D9SI2xQl.js";import"./zrender-hT_74Tps.js";import"./tslib-BDyQ-Jie.js";import"./pinia-Dk4c0Xys.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-t6Kmw5HV.js";import"./vue-echarts-uXBc8QVI.js";import"./resize-detector-CZu9PX2v.js";const de={__name:"PriceRangesModelChart",setup(I){const a=_(),d=u([]),t=u(null);let i=null;const h=u(0),s=async()=>{const n=_();if(d.value=[],console.log(11111),!(n.keywordID==null||n.keywordID=="")){d.value=[];const e=await J(n.keywordID,n.Brand4,n.priceRanges);d.value=[],console.log(e.data);for(const o in e.data)d.value.push({value:e.data[o],name:o});console.log("重新渲染PRMC"+h.value),h.value++,c.series[0].data=d.value,i.setOption(c)}};let c={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"型号销量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:d.value}]};const S=y(()=>a.Brand4),x=y(()=>a.priceRanges);return v(S,n=>{try{n.length>0&&s()}catch(e){console.log(e)}},{immediate:!0,deep:!0}),v(x,n=>{try{n.length>0&&s()}catch(e){console.log(e)}},{immediate:!0,deep:!0}),$(()=>{d.value=[],t.value=document.getElementById("chartId3"),i=E(t.value),i.setOption(c),i.on("click",n=>{if(n.componentType==="series"){const e=c.series[n.seriesIndex].data[n.dataIndex];_().setBrand5Store(e.name)}})}),F(()=>{i&&i.dispose()}),(n,e)=>{const o=U("v-chart");return w(),R(o,{id:"chartId3",class:"chartChartId3",option:O(c)},null,8,["option"])}}},ie=G(de,[["__scopeId","data-v-0b69e7e2"]]),ce={class:"selectdiv",style:{"margin-left":"40px"}},ue=r("span",null,"分类一：",-1),pe={class:"selectdiv"},me=r("span",null,"分类二：",-1),he={class:"selectdiv"},ve=r("span",null,"分类三：",-1),_e={__name:"SelectBrand",setup(I){const a=u(""),d=u(""),t=u(""),i=u([]),h=u([]),s=u([]),c=async()=>{const o=_(),l=await X(o.keywordID);i.value=l.data},S=async()=>{const o=_(),l=await Z(o.keywordID,a.value);h.value=l.data},x=async()=>{const o=_(),l=await ee(o.keywordID,a.value,d.value);s.value=l.data},n=()=>{const o=_();o.setBrand1Store(a.value),o.setBrand2Store(d.value),o.setBrand3Store(t.value),(a.value||d.value||t.value)&&(o.setCommitRangeIndex(-1),o.setPriceRangeIndex(-1))};$(()=>{c()}),v(a,()=>{S(),d.value="",t.value="",h.value=[],s.value=[],n()}),v(d,()=>{x(),t.value="",s.value=[],n()}),v(t,()=>{n()});const e=y(()=>_().Brand3);return v(e,(o,l)=>{n()},{immediate:!0,deep:!0}),(o,l)=>{const B=Q,V=Y;return w(),D(C,null,[r("div",ce,[ue,m(V,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=p=>a.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(w(!0),D(C,null,A(i.value,p=>(w(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r("div",pe,[me,m(V,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=p=>d.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(w(!0),D(C,null,A(h.value,p=>(w(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r("div",he,[ve,m(V,{modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=p=>t.value=p),class:"m-2",placeholder:"Select",style:{width:"150px"}},{default:b(()=>[(w(!0),D(C,null,A(s.value,p=>(w(),R(B,{key:p.value,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])],64)}}},ge={__name:"BrandShopProportionChart",props:{num:{type:String,default:"0"}},setup(I){const a=_(),d=N(),t=u([[1],[2]]);let i=null;const h=z(),s=I,c={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{top:"2%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t.value[0]},series:[{type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:t.value[1]}]},S=async()=>{const e=await te(a.keywordID,a.Brand5);t.value[0]=e.data[0],t.value[1]=e.data[1],c.yAxis.data=t.value[0],c.series[0].data=t.value[1],i.setOption(c)},x=async e=>{const o=await oe(a.keywordID,a.Brand5,e);P().setPidList(o.data),d.push("/goods")};$(()=>{t.value[0]=[],t.value[1]=[],t.value=document.getElementById("chartId4"+s.num),i=E(t.value),i.setOption(c),i.on("click",o=>{if(o.componentType==="series"){const l=c.yAxis.data[o.dataIndex];console.log("Y轴数据:",l),x(l),h.setDrawerStore(!1),h.setDrawer2Store(!1),h.setDrawer3Store(!1)}});const e=y(()=>h.drawer);v(e,(o,l)=>{c.yAxis.data=[],c.series[0].data=[],i.setOption(c)},{immediate:!0,deep:!0})});const n=y(()=>a.Brand5);return v(n,(e,o)=>{e!=""&&S()},{immediate:!0,deep:!0}),(e,o)=>{const l=U("v-chart");return w(),R(l,{id:"chartId4"+s.num,class:"chart",option:c},null,8,["id"])}}},we={class:"main"},fe={class:"header"},ye={class:"imgDiv"},Se={class:"title"},xe={class:"model"},be=r("span",{class:"titleSpan"},"商品型号:",-1),Be={class:"titleSpanBrand"},Ie={class:"name"},De=r("span",{class:"titleSpan"},"商品名称:",-1),ke={class:"titleSpanTitle"},Ve={class:"price"},Te=r("span",{class:"titleSpan"},"商品价格:",-1),Ce={class:"titleSpanNum"},Pe={class:"commit"},Re=r("span",{class:"titleSpan"},"商品销量:",-1),$e={class:"titleSpanNum"},Me=r("div",{class:"hr_div"},null,-1),Le={class:"chartdiv"},W={__name:"GoodShow",props:{drawer:{type:Boolean,default:!1},num:{type:String,default:"0"}},setup(I){const a=u({brand:"",title:"",priceMax:"",priceMin:"",priceAvg:"",commit:"",goodCommit:"",commitScore:"",pimg:[]}),d=I;v(()=>d.drawer,s=>{s||(a.value={brand:"",title:"",priceMax:"",priceMin:"",priceAvg:"",commit:"",goodCommit:"",commitScore:"",pimg:[]},_().setBrand5Store(""))});const t=_(),i=async()=>{console.log("1111111111111"),console.log(t.keywordID,t.Brand1,t.Brand2,t.Brand3,t.Brand4,t.Brand5);const s=await se(t.keywordID,t.Brand1,t.Brand2,t.Brand3,t.Brand4,t.Brand5);a.value.brand=s.data[0],a.value.title=s.data[1],a.value.priceMax=s.data[2][0],a.value.priceMin=s.data[2][1],a.value.commit=s.data[3],a.value.pimg=s.data[4],a.value.goodCommit=s.data[5]},h=y(()=>t.Brand5);return v(h,s=>{s!=""&&i()},{immediate:!0,deep:!0}),(s,c)=>(w(),D("div",we,[r("div",fe,[r("div",ye,[m(le,{pimg:a.value.pimg},null,8,["pimg"])]),r("div",Se,[r("div",xe,[be,r("span",Be,T(a.value.brand),1)]),r("div",Ie,[De,r("span",ke,T(a.value.title),1)]),r("div",Ve,[Te,r("span",Ce,"￥"+T(a.value.priceMin)+"-￥"+T(a.value.priceMax),1)]),r("div",Pe,[Re,r("span",$e,T(a.value.commit),1)])])]),Me,r("div",Le,[m(ge,{style:{width:"720px",height:"520px"},num:d.num},null,8,["num"])])]))}},Ae={style:{width:"1800px",height:"600px",margin:"0px",padding:"0px"}},Oe={__name:"TopToBottomDrawer",setup(I){const a=N(),d=u([]),t=u(null);let i=null;const h=async()=>{const e=_(),o=await ae(e.keywordID,e.Brand1,e.Brand2,e.Brand3,e.commitRangeIndex,e.priceRangeIndex);d.value=o.data,s.xAxis[0].data=d.value[0],s.series[0].data=d.value[1],s.series[1].data=d.value[2],s.series[2].data=d.value[3],i.setOption(s)},s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0},axisLabel:{rotate:45,fontStyle:"italic",truncate:!0,formatter:function(e){return e.length>20?e.substring(0,20)+"...":e}}}],yAxis:[{name:"销量",type:"value",position:"left"},{name:"价格",type:"value",position:"right"},{name:"评分",type:"value",max:1,offset:35,position:"right"}],series:[{name:"销量",type:"bar",data:[]},{name:"价格",type:"bar",data:[],yAxisIndex:1},{name:"评分",type:"line",data:[],yAxisIndex:2}]},c=async()=>{const e=_();console.log(e.brand5);const o=await re(e.keywordID,e.Brand1,e.Brand2,e.Brand3,e.commitRangeIndex,e.priceRangeIndex,e.Brand5);console.log("pidList",o.data.pidList),P().setPidList(o.data),a.push("/goods")};$(()=>{t.value=document.getElementById("chartIdTTB"),i=E(t.value),i.setOption(s),i.on("click",e=>{if(e.componentType==="series"){console.log(e),_().setBrand5Store(e.name),c();const l=z();l.setDrawerStore(!1),l.setDrawer2Store(!1),l.setDrawer3Store(!1)}})});const S=_(),x=y(()=>S.commitRangeIndex),n=y(()=>S.priceRangeIndex);return v(x,e=>{h()},{immediate:!0,deep:!0}),v(n,e=>{h()},{immediate:!0,deep:!0}),(e,o)=>{const l=U("v-chart");return w(),D("div",Ae,[m(l,{id:"chartIdTTB",class:"chartTTB",option:s})])}}},Ee=G(Oe,[["__scopeId","data-v-d02357cc"]]),ze={class:"selectDiv"},Ue=r("span",null,"品牌",-1),Ne=r("span",null,"销量",-1),We=r("span",null,"价格",-1),Ge={style:{width:"1500px",height:"700px"}},Fe={class:"drawerDiv",style:{"margin-left":"10px"}},Ke={class:"drawerDiv",style:{"border-radius":"15px"}},Qe={class:"drawerDiv",style:{"border-radius":"15px"}},ht={__name:"ChartManage",setup(I){const a=u(!1),d=u("rtl"),t=()=>{n.setDrawerStore(!1)},i=u(!1),h=u("ltr"),s=()=>{n.setDrawer2Store(!1)},c=u(!1),S=u("ttb"),x=()=>{n.setDrawer3Store(!1)};v(()=>a,g=>{g||P().setPidList([])}),v(()=>i,g=>{g||P().setPidList([])}),v(()=>c,g=>{g||P().setPidList([])});const n=z(),e=y(()=>n.drawer);v(e,g=>{a.value=g},{immediate:!0,deep:!0});const o=y(()=>n.drawer2);v(o,g=>{i.value=g},{immediate:!0,deep:!0});const l=y(()=>n.drawer3);v(l,g=>{c.value=g},{immediate:!0,deep:!0});const B=N(),V=u("/chart/bprc"),p=()=>{V.value=B.currentRoute.value.path,console.log(B.currentRoute.value.path)};return F(()=>{B.afterEach(p)}),(g,f)=>{const M=H,K=j,L=q;return w(),D(C,null,[r("div",null,[r("div",ze,[m(_e),m(K,{"active-text-color":"black","background-color":"rgba(20, 20, 20, 0)","text-color":"rgba(20, 20, 20, 0.4)",onOpen:g.handleOpen,onClose:f[0]||(f[0]=k=>x),router:!0,"default-active":O(B).currentRoute.path,class:"el-menu-chart-page",mode:"horizontal"},{default:b(()=>[m(M,{class:"chart-page-menu",index:"/chart/bprc",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[Ue]),_:1}),m(M,{class:"chart-page-menu",index:"/chart/csc",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[Ne]),_:1}),m(M,{class:"chart-page-menu",index:"/chart/s3c",router:"",style:{width:"60px","font-size":"16px"}},{default:b(()=>[We]),_:1})]),_:1},8,["onOpen","default-active"])]),r("div",Ge,[m(O(ne))])]),m(L,{modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=k=>a.value=k),direction:d.value,size:"1520","before-close":t,"with-header":!1},{default:b(()=>[r("div",Fe,[m(ie,{style:{width:"700px",height:"800px"}})]),r("div",Ke,[m(W,{style:{"border-radius":"15px"},drawer:a.value,num:1},null,8,["drawer"])])]),_:1},8,["modelValue","direction"]),m(L,{modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=k=>i.value=k),direction:h.value,size:"780","before-close":s,"with-header":!1,style:{"border-radius":"0 5px 5px 0"}},{default:b(()=>[r("div",Qe,[m(W,{style:{"border-radius":"15px"},drawer:i.value,num:2},null,8,["drawer"])])]),_:1},8,["modelValue","direction"]),m(L,{modelValue:c.value,"onUpdate:modelValue":f[3]||(f[3]=k=>c.value=k),direction:S.value,size:"650","before-close":x,"with-header":!1,style:{"border-radius":"0 0 5px 5px",padding:"0",margin:"0"}},{default:b(()=>[m(Ee,{style:{"border-radius":"15px",margin:"0",padding:"0"},drawer:c.value},null,8,["drawer"])]),_:1},8,["modelValue","direction"])],64)}}};export{ht as default};
